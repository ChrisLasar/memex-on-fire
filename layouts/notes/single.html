{{ define "main" }}

<section class="section">
    <div class="container">
        <h1 class="title is-1">{{ .Title }}</h1>

        <buttons class="is-right">
            {{ if not .Params.lock }}
            <a class="button is-primary is-outlined is-small" href="/admin/#/edit/notes/{{ .Params.id }}">
                {{partial "fa-icon" (dict "icon" "regular/edit")}}
                <span>Edit</span>
            </a>
            {{ end }}

            {{ $link:= printf "[#](/notes/%s \"%s\")" .Params.id .Title }}
            <button class="button is-primary is-outlined is-small btn" data-clipboard-text="{{$link}}">
                {{partial "fa-icon" (dict "icon" "regular/copy")}}
                <span>Copy Link</span>
            </button>
        </buttons>

        {{ partial "keyword-line.html" (dict "content" . "tohighlight" .Params.keywords ) }}

        <div class="content">
            {{ .Content }}
        </div>

        <div class="conten has-text-weight-semibold">
            {{ .Summary}}
        </div>
    </div>
</section>


{{ end }}

{{ define "info-panel" }}
<nav class="panel is-shadowless">
    <p class="panel-heading is-radiusless">
        Note Info
    </p>
    <div class="tabs is-small">
        <ul>
            <li class="tab is-active" onclick="openTab(event,'connections')"><a>Connections</a></li>
            <li class="tab" onclick="openTab(event,'taxonomies')"><a>Taxonomies</a></li>
            <li class="tab" onclick="openTab(event,'references')"><a>References</a></li>
            <li class="tab" onclick="openTab(event,'graph')"><a>Graph</a></li>
        </ul>
    </div>
    <div class="container">
        <div id="connections" class="content-tab"> 
            {{ partial "panel-info/related.html" . }}
        </div>

        <div id="taxonomies" class="content-tab" style="display:none">
            {{ with .Params.topics }}
            <p class="subtitle is-5">Topic</p>
            <div class="content">{{ . }}</div>
            {{ end }}

            {{ with .Params.keywords }}<p class="subtitle is-5">Keywords</p>{{ end }}
            {{ partial "attribute-line.html" (dict "context" . "attribute" "keywords" ) }}

            {{ with .Params.tags }}<p class="subtitle is-5">Tags</p>{{ end }}
            {{ partial "attribute-line.html" (dict "context" . "attribute" "tags" ) }}

            {{ with .Params.flow }}<p class="subtitle is-5">Flow States</p>{{ end }}
            {{ partial "attribute-line.html" (dict "context" . "attribute" "flow" ) }}
        </div>

        <div id="references" class="content-tab" style="display:none">
            {{ partial "panel-info/references.html" . }}
        </div>

        <div id="graph" class="content-tab" style="display:none">
            Not implemented yet
        </div>
    </div>
</nav>
{{ end }}

{{ define "list" }}
<!--panel-->
<nav class="panel">
    <p class="panel-heading is-radiusless">
        List of Notes
    </p>
    <!--div class="panel-block">
                <p class="control has-icons-left">
                    <input class="input" type="text" placeholder="Search">
                    <span class="icon is-left">
                        <i class="fas fa-search" aria-hidden="true"></i>
                    </span>
                </p>
            </div-->
    {{ range where .Site.RegularPages "Section" "notes" }}
    <a class="panel-block {{ if eq . $.Page }} is-active{{ end }}" href="{{ .RelPermalink }}">
        <span class="panel-icon">
            <i class="fas fa-file-alt" aria-hidden="true"></i>
        </span>
        <span class="is-size-7">
            {{ .Title }}
        </span>
    </a>
    {{ end }}
</nav>
{{ end }}